<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reservar chofer privado | JCDM</title>
  <link rel="icon" href="/assets/favicon.ico">
  <link rel="stylesheet" href="/styles.css">
  <meta name="description" content="Reserva tu chofer privado en Miami con JCDM Technologies LLC. Traslados ejecutivos, eventos y servicio por horas.">
</head>
<body>
  <header data-include="/partials/header.html"></header>

  <main class="container" style="max-width:960px;margin:2rem auto;padding:0 1rem">
    <h1>Reservar chofer privado</h1>
    <p>Completa el formulario o escribe por WhatsApp. Respondemos rápido.</p>

    <!-- Formspree: reemplaza el action por tu endpoint real -->
<form id="booking-form" class="form" action="https://formspree.io/f/xgvljywo" method="POST" novalidate>
  <!-- honeypot antispam -->
  <input type="text" name="_gotcha" tabindex="-1" autocomplete="off" class="hp" aria-hidden="true" />

  <div class="grid-2">
    <label>Nombre y apellido
      <input type="text" name="nombre" required minlength="3" autocomplete="name" />
    </label>

    <label>Teléfono (WhatsApp)
      <input type="tel" name="telefono" required inputmode="tel" placeholder="+1 305 000 0000" />
    </label>
  </div>

  <div class="grid-3">
    <label>Fecha
      <input type="date" name="fecha" required />
    </label>

    <label>Hora
      <input type="time" name="hora" required />
    </label>

    <label>Horas de servicio
      <input type="number" name="duracion_horas" min="1" max="24" value="2" required />
    </label>
  </div>

  <div class="grid-2">
    <label>Origen (dirección o punto)
      <input type="text" name="origen" required placeholder="Hotel, aeropuerto, dirección…" />
    </label>

    <label>Destino (opcional)
      <input type="text" name="destino" placeholder="Evento, dirección…" />
    </label>
  </div>

  <label>Comentarios (opcional)
    <textarea name="comentarios" rows="4" placeholder="Maletas, tipo de vehículo, notas…"></textarea>
  </label>

  <!-- Metadatos de trazabilidad -->
  <input type="hidden" name="page_url" value="" />
  <input type="hidden" name="utm_source" value="" />
  <input type="hidden" name="utm_medium" value="" />
  <input type="hidden" name="utm_campaign" value="" />

  <!-- UX -->
  <button type="submit" class="btn btn-primary" id="submitBtn">
    Reservar ahora
  </button>

  <p id="formMsg" class="form-msg" role="status" aria-live="polite"></p>
</form>

  </main>

  <footer data-include="/partials/footer.html"></footer>

  <script>
    // Carga header/footer parciales
    (async () => {
      const inc = async (sel) => {
        const el = document.querySelector(sel);
        if (!el) return;
        const url = el.getAttribute('data-include');
        if (!url) return;
        const html = await fetch(url, { cache: 'no-cache' }).then(r => r.text());
        el.innerHTML = html;
      };
      await inc('header[data-include]');
      await inc('footer[data-include]');
    })();

    // WhatsApp dinámico
    const phone = '17863487458'; // <-- Reemplaza por tu número: 13051234567 (sin +)
    const waBtn = document.getElementById('waButton');
    function buildWaText() {
      const f = document.getElementById('form-reserva');
      const p = new URLSearchParams({
        servicio: 'Chofer privado',
        nombre: f.nombre.value || '',
        telefono: f.telefono.value || '',
        fecha: f.fecha.value || '',
        hora: f.hora.value || '',
        origen: f.origen.value || '',
        destino: f.destino.value || '',
        tipo: f.tipo.value || '',
        horas: f.horas.value || '',
        pasajeros: f.pasajeros.value || '',
        notas: f.notas.value || '',
      });
      return `https://wa.me/${phone}?text=${encodeURIComponent(
        'Reserva de chofer privado:\n' +
        `Nombre: ${p.get('nombre')}\n` +
        `Teléfono: ${p.get('telefono')}\n` +
        `Fecha/Hora: ${p.get('fecha')} ${p.get('hora')}\n` +
        `Origen: ${p.get('origen')}\n` +
        `Destino: ${p.get('destino')}\n` +
        `Tipo: ${p.get('tipo')} | Horas: ${p.get('horas')}\n` +
        `Pasajeros: ${p.get('pasajeros')}\n` +
        `Notas: ${p.get('notas')}`
      )}`;
    }
    waBtn.href = buildWaText();
    document.getElementById('form-reserva').addEventListener('input', () => {
      waBtn.href = buildWaText();
    });

    // UX: mensaje rápido al enviar con Formspree (sin redirección)
    const form = document.getElementById('form-reserva');
    const msg = document.getElementById('form-msg');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      msg.textContent = 'Enviando…';
      try {
        const res = await fetch(form.action, {
          method: 'POST',
          headers: { 'Accept': 'application/json' },
          body: new FormData(form)
        });
        if (res.ok) {
          msg.textContent = '¡Listo! Te contactaremos para confirmar la reserva.';
          form.reset();
          waBtn.href = buildWaText();
        } else {
          msg.textContent = 'No se pudo enviar. Intenta por WhatsApp.';
        }
      } catch {
        msg.textContent = 'Error de red. Intenta por WhatsApp.';
      }
    });
  </script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "Chofer privado por horas",
  "provider": { "@type": "LocalBusiness", "name": "JCDM Technologies LLC" },
  "areaServed": "Miami-Dade, Broward",
  "availableChannel": "https://www.jcdmtech.com/reservar.html"
}
</script>


</body>
</html>
