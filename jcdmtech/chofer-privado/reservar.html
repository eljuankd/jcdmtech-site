<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reservar chofer privado | JCDM</title>
  <link rel="icon" href="/assets/favicon.ico">
  <link rel="stylesheet" href="/styles.css">
  <meta name="description" content="Reserva tu chofer privado en Miami con JCDM Technologies LLC. Traslados ejecutivos, eventos y servicio por horas.">
</head>
<body>
  <div id="header"></div>

  <main class="container" style="max-width:960px;margin:2rem auto;padding:0 1rem">
    <h1>Reservar chofer privado</h1>
    <p>Completa el formulario o escribe por WhatsApp. Respondemos rápido.</p>

    <!-- Formspree: reemplaza el action por tu endpoint real -->
<form id="booking-form" class="form" action="https://formspree.io/f/xgvljywo" method="POST" novalidate>
  <!-- honeypot antispam -->
  <input type="text" name="_gotcha" tabindex="-1" autocomplete="off" class="hp" aria-hidden="true" />

  <div class="grid grid-2">
    <label>Nombre y apellido
      <input type="text" name="nombre" required minlength="3" autocomplete="name" />
    </label>

    <label>Teléfono (WhatsApp)
      <input type="tel" name="telefono" required inputmode="tel" placeholder="+1 305 000 0000" />
    </label>
  </div>

  <div class="grid grid-3">
    <label>Fecha
      <input type="date" name="fecha" required />
    </label>

    <label>Hora
      <input type="time" name="hora" required />
    </label>

    <label>Horas de servicio
      <input type="number" name="duracion_horas" min="1" max="24" value="2" required />
    </label>
  </div>

  <div class="grid grid-2">
    <label>Origen (dirección o punto)
      <input type="text" name="origen" required placeholder="Hotel, aeropuerto, dirección…" />
    </label>

    <label>Destino (opcional)
      <input type="text" name="destino" placeholder="Evento, dirección…" />
    </label>
  </div>

  <label>Comentarios (opcional)
    <textarea name="comentarios" rows="4" placeholder="Maletas, tipo de vehículo, notas…"></textarea>
  </label>

  <!-- Metadatos de trazabilidad -->
  <input type="hidden" name="page_url" value="" />
  <input type="hidden" name="utm_source" value="" />
  <input type="hidden" name="utm_medium" value="" />
  <input type="hidden" name="utm_campaign" value="" />

  <!-- UX -->
<button type="submit" id="submitBtn" class="btn btn-primary btn-lg">Reservar ahora</button>

  <p id="formMsg" role="status" aria-live="polite"></p>
</form>

  </main>

  <div id="footer"></div>



<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Service",
  "name": "Chofer privado por horas",
  "provider": { "@type": "LocalBusiness", "name": "JCDM Technologies LLC" },
  "areaServed": "Miami-Dade, Broward",
  "availableChannel": "https://www.jcdmtech.com/chofer-privado/reservar.html"
}
</script>

<script src="/js/app.js" defer></script>
<script src="/js/supabase.config.js"></script>
<script type="module">
  import { createClient } from "https://esm.sh/@supabase/supabase-js@2";
  const supabase = createClient(window.__SUPABASE__.url, window.__SUPABASE__.anon);
  const form = document.getElementById("booking-form");
  const { data: { session } } = await supabase.auth.getSession();
  if (session) {
    const { data: prof } = await supabase.from("profiles")
      .select("full_name,phone").eq("id", session.user.id).single();
    if (prof) {
      if (form.nombre && !form.nombre.value) form.nombre.value = prof.full_name || "";
      if (form.telefono && !form.telefono.value) form.telefono.value = prof.phone || "";
    }
  }
</script>

<script src="/js/booking.js" defer></script>

</body>
</html>
